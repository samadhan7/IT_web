@*

*@
@{
	Layout = "~/Views/Shared/_AdminLayout.cshtml";
	ViewData["Title"] = "Openings";
}
@Html.AntiForgeryToken()


<!-- top bar navigation -->
<div class="headerbar">

	<!-- LOGO -->
	<div class="headerbar-left">
		<a href="@Url.Action("Dashboard","admin")" class="logo"><img alt="Logo" src="~/assets/public/img/favicon/logo.png" /> <span>Admin</span></a>
	</div>

	<nav class="navbar-custom">

		<ul class="list-inline float-right mb-0">


			<li class="list-inline-item dropdown notif">
				<a class="nav-link dropdown-toggle nav-user" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
					<img src="~/assets/admin/images/avatars/admin.png" alt="Profile image" class="avatar-rounded">
				</a>
				<div class="dropdown-menu dropdown-menu-right profile-dropdown ">
					<!-- item-->
					<div class="dropdown-item noti-title">
						<h5 class="text-overflow"><small>Hello, admin</small> </h5>
					</div>

					<!-- item-->
					<a href="@Url.Action("Profile","admin")" class="dropdown-item notify-item">
						<i class="fa fa-user"></i> <span>Profile</span>
					</a>

					<!-- item-->
					<a href="@Url.Action("Logout","admin")" class="dropdown-item notify-item">
						<i class="fa fa-power-off"></i> <span>Logout</span>
					</a>

				</div>
			</li>

		</ul>

		<ul class="list-inline menu-left mb-0">
			<li class="float-left">
				<button class="button-menu-mobile open-left">
					<i class="fa fa-fw fa-bars"></i>
				</button>
			</li>
		</ul>

	</nav>

</div>
<!-- End Navigation -->
<!-- Left Sidebar -->
<div class="left main-sidebar">

	<div class="sidebar-inner leftscroll">

		<div id="sidebar-menu">

			<ul>
				<li class="submenu">
					<a class="active" href="@Url.Action("Dashboard","admin")"><i class="fa fa-fw fa-tachometer"></i><span> Dashboard </span> </a>
				</li>

				<li class="submenu">
					<a href="@Url.Action("Openings","admin")"><i class="fa fa-fw fa-briefcase"></i><span> Manage Openings </span> </a>
				</li>

				<li class="submenu">
					<a href="@Url.Action("Applications","admin")"><i class="fa fa-fw fa-file"></i><span> Job Applications </span> </a>
				</li>

				<li class="submenu">
					<a href="@Url.Action("Inquiries","admin")"><i class="fa fa-fw fa-envelope"></i><span> Manage Inquiries </span> </a>
				</li>


			</ul>

			<div class="clearfix"></div>

		</div>

		<div class="clearfix"></div>

	</div>

</div>
<!-- End Sidebar -->




<div class="content-page">

	<!-- Start content -->
	<div class="content">

		<div class="container-fluid">

			<div class="row">
				<div class="col-xl-12">
					<div class="breadcrumb-holder">
						<h1 class="main-title float-left">Openings</h1>
						<ol class="breadcrumb float-right">
							<li class="breadcrumb-item">Home</li>
							<li class="breadcrumb-item active">Openings</li>
						</ol>
						<div class="clearfix"></div>
					</div>
				</div>
			</div>
			<!-- end row -->







			<div class="row">

				<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
					<div class="card mb-3">
						<div class="card-header d-flex justify-content-between align-items-center">
							<h3><i class="fa fa-users"></i> Openings</h3>
							<button class="btn btn-danger" data-toggle="modal" data-target="#addJobModal">Add New Job</button>
						</div>

						<div class="card-body">

							<table id="example1" class="table table-bordered table-responsive-xl table-hover display">
								<thead>
									<tr>
										<th>ID</th>
										<th>Job Role</th>
										<th>Name</th>
										<th>Email</th>
										<th>Contact No</th>
										<th>Address</th>
										<th>Resume</th>
										<th>Cover Letter</th>
										<th>Data Privacy</th>
										<th>Last Modified</th>
										<th>Action</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>1</td>
										<td>test</td>
										<td>test</td>
										<td>test@mail.in</td>
										<td>12345678</td>
										<td>test</td>
										<td>Resume</td>
										<td>Letter</td>
										<td>privacy</td>
										<td>date</td>
										<td>
											<button type='button' class='btn btn-danger btn-icon-text delete-btn' data-id='' data-action='delete-application'>Delete</button>
										</td>
									</tr>
									<tr>
										<td>1</td>
										<td>test</td>
										<td>test</td>
										<td>test@mail.in</td>
										<td>12345678</td>
										<td>test</td>
										<td>Resume</td>
										<td>Letter</td>
										<td>privacy</td>
										<td>date</td>
										<td>
											<button type='button' class='btn btn-danger btn-icon-text delete-btn' data-id='' data-action='delete-application'>Delete</button>
										</td>
									</tr>
									
									
									
									
									
								</tbody>
							</table>

						</div>
					</div><!-- end card-->
				</div>

			</div>



		</div>
		<!-- END container-fluid -->

	</div>
	<!-- END content -->

</div>
<!-- END content-page -->
<!-- Modal -->
<div class="modal fade" id="addJobModal" tabindex="-1" role="dialog" aria-labelledby="addJobModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title" id="addJobModalLabel">Add New Job</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<form id="jobForm">
					<div class="form-group">
						<label for="jobName">Job Name</label>
						<input type="text" class="form-control" id="jobName" name="jobName">
					</div>
					<div class="form-group">
						<label for="jobDescription">Job Description</label>
						<textarea class="form-control" id="jobDescription" name="jobDescription"></textarea>
					</div>
					<div class="form-group">
						<label for="location">Location</label>
						<input type="text" class="form-control" id="location" name="location">
					</div>
					<div class="form-group">
						<label for="experience">Experience</label>
						<input type="text" class="form-control" id="experience" name="experience">
					</div>
					<div class="form-group">
						<label for="status">Status</label>
						<select class="form-control" id="status" name="status">
							<option value="1">Active</option>
							<option value="0">Inactive</option>
						</select>
					</div>
					<!-- Add more fields as necessary -->
				</form>
				<div id="required" class="text-danger"></div>
			</div>
			<div class="modal-footer">
				
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary" id="saveJobButton">Save Job</button>
			</div>
		</div>
	</div>
</div>

<footer class="footer">
	<span class="text-right">
		Copyright <a target="_blank" href="https://www.gtlsoftwares.com/">© GTL 2024</a>
	</span>
	<span class="float-right">
		Powered by <a target="_blank" href="https://www.gtlsoftwares.com/"><b>GTL SOFTWARE PVT. LTD.</b></a>
	</span>
</footer>


@section scripts {
	<script src="~/assets/admin/assets/js/modernizr.min.js"></script>
	<script src="~/assets/admin/js/jquery.min.js"></script>
	<script src="assets/js/moment.min.js"></script>

	<script src="~/assets/admin/js/popper.min.js"></script>
	<script src="~/assets/admin/js/bootstrap.min.js"></script>

	<script src="~/assets/admin/js/detect.js"></script>
	<script src="~/assets/admin/js/fastclick.js"></script>
	<script src="~/assets/admin/js/jquery.blockUI.js"></script>
	<script src="~/assets/admin/js/jquery.nicescroll.js"></script>

	<!-- App js -->
	<script src="~/assets/admin/js/pikeadmin.js"></script>

	<!-- BEGIN Java Script for this page -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>

	<!-- Counter-Up-->
	<script src="~/assets/admin/plugins/waypoints/lib/jquery.waypoints.min.js"></script>
	<script src="~/assets/admin/plugins/counterup/jquery.counterup.min.js"></script>

	<script>
		$(document).ready(function () {
			// data-tables
			$('#example1').DataTable();

			// counter-up
			$('.counter').counterUp({
				delay: 10,
				time: 600
			});
		});

		$(document).ready(function () {
			$('#saveJobButton').click(function (event) {
				event.preventDefault();

				var submitButton = $(this).find('#saveJobButton');

				$('#required').text('');

				var jName = $('#jobName').val().trim();
				var jDescription = $('#jobDescription').val().trim();
				var locatio = $('#location').val().trim();
				var experienc = $('#experience').val().trim();
				var statu = $('#status').val();

				if (!jName || !jDescription || !locatio || !experienc || !statu) {
					$('#required').text('All fields are required. Please fill them out.');
					return;
				}

				var jobData = {
					jobName: jName,
					jobDescription: jDescription,
					location: locatio,
					experience: experienc,
					status: parseInt(statu) // Ensure status is an integer
				};


				console.log(jobData); // Log to check the structure before sending

				$.ajax({
					url: '@Url.Action("Openings")',
					type: 'POST',
					data: JSON.stringify(jobData), // Convert to JSON string
					contentType: 'application/json',
					success: function (response) {
						$('#required').text(response.message);
						submitButton.prop('disabled', false).text('Save Job');
						if (response.success) {
							location.reload();
						}
					},
					error: function (xhr, status, error) {
						$('#required').text("Error :" + response.message);
						submitButton.prop('disabled', false).text('Save Job');
					}
				});

			});
		});
	</script>

}
